# 工具链（Toolchains）

Zed 提供专门的工具链选择界面，允许你为当前项目的特定语言挑选合适的工具组合。

设想一个 Python 项目，它使用虚拟环境来封装依赖与解释器。语言服务器必须知道你正在使用哪一个虚拟环境，才能正确理解项目代码。有了工具链选择器，就无需手动配置语言服务器指向合适的虚拟环境目录，只需在下拉菜单中选择对应的虚拟环境（即工具链）即可。

你甚至可以为同一 Zed 项目中的不同子项目挑选不同的工具链。子项目的划分因语言而异。在协作场景中，只有项目所有者可以查看和修改当前激活的工具链。

在[远程开发](./remote-development.md)场景中，你可以使用工具链选择器来控制 SSH 主机上的活动工具链。若你[分享项目](./collaboration.md)，受邀访客无法操作工具链。

## 为什么需要工具链？

语言服务器在启动时通常依赖活动工具链：如果无法解析依赖，诸如“跳转定义”“代码补全”等功能就可能失效。

当你在终端面板中开启新的 shell 时，活动工具链同样会生效。很多工具链都提供“激活脚本”，用于在 shell 环境中注入依赖。Zed 在新建终端时会自动运行这些脚本。

这一行为同样适用于 [任务系统](./tasks.md)。Zed 在执行任务时相当于“打开一个新终端并执行命令”，因此任务运行也会受到活动工具链及其激活脚本的影响。

## 选择工具链

如果当前子项目存在活动工具链，状态栏右侧会显示其名称。点击即可打开工具链选择器，或通过命令面板执行 {#action toolchain::Select}。

Zed 会依据项目结构自动推断可用工具链，并在首次打开项目时尽力为你选好一个默认工具链。

工具链的选择范围仅作用于当前子项目。根据项目结构，这个子项目可能是整个仓库，也可能只是其中的一部分。比如在包含多个子项目的 monorepo 中，你可以为每个子项目挑选不同的工具链。

## 手动添加工具链

若自动检测无法满足需求，可以手动添加。点击工具链选择器中的“Add toolchain”按钮，填写工具链路径并为其指定一个名称即可。
